{"config":{"sparqlEndpoint":"https://ldf.fi/geonames/sparql","pageSize":15,"matchQuery":"PREFIX wgs84: <http://www.w3.org/2003/01/geo/wgs84_pos#>\nPREFIX gn: <http://www.geonames.org/ontology#>\nPREFIX text: <http://jena.apache.org/text#>\nSELECT DISTINCT ?queryId ?entity ?label ?score ?description (CONCAT('<img src=\"https://maps.googleapis.com/maps/api/staticmap?size=400x300&key=AIzaSyAAy3JlDfgEgdmGOyeN0e4tcGD2U6_GwGo&zoom=7&markers=',STR(?lat),\",\",STR(?long),'\"/>') AS ?_map) (CONCAT('<a href=\"',STR(?entity),'\" target=\"_blank\">[o]</a>') AS ?url) {\n  { # QUERY\n    BIND(REPLACE(REPLACE(REPLACE(REPLACE(<QUERY>,\"([\\\\+\\\\-\\\\&\\\\|\\\\!\\\\(\\\\)\\\\{\\\\}\\\\[\\\\]\\\\/\\\\^\\\\\\\"\\\\~\\\\*\\\\?\\\\:\\\\\\\\])\",\"\\\\\\\\$1\"),\"^ +| +$\", \"\"),\", *\",\" \"),\"\\\\. \",\"* \") AS ?escapedQuery)\n    ?entity text:query ?escapedQuery .\n    ?entity gn:name|gn:alternateName ?pname .\n    FILTER(STR(?pname)=<QUERY>)    \n    ?entity gn:featureCode ?description .\n    OPTIONAL { \n      ?entity gn:parentADM3 ?pa3 .\n      FILTER (?pa3!=?entity)\n      ?pa3 gn:name ?parent3 \n    }\n    OPTIONAL { \n      ?entity gn:parentADM2 ?pa2 .\n      FILTER (?pa2!=?entity)\n      ?pa2 gn:name ?parent2 \n    }\n    OPTIONAL { \n      ?entity gn:parentADM1 ?pa1 .\n      FILTER (?pa1!=?entity)\n      ?pa1 gn:name ?parent1 \n    }\n    OPTIONAL { ?entity gn:parentCountry/gn:name ?parentCountry }\n    BIND(CONCAT(?pname, COALESCE(CONCAT(\", \", ?parent3),\"\"), COALESCE(CONCAT(\", \", ?parent2),\"\"), COALESCE(CONCAT(\", \", ?parent1),\"\"), \", \", ?parentCountry) AS ?label)\n    OPTIONAL { ?entity gn:population ?score1 }\n    BIND(COALESCE(1-(1/?score1),0.5) AS ?score)\n    ?entity wgs84:lat ?lat .\n    ?entity wgs84:long ?long .\n    BIND(<QUERY_ID> AS ?queryId)\n  } # /QUERY\n}\nORDER BY DESC(?score)"},"state":null}